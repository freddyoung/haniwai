{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags %}

{% block title %}{{ page.title }} | HANIWAI{% endblock %}

{% block content %}
    <section class="pt-32 pb-24 bg-white">
        <div class="container mx-auto px-4 lg:px-12">
            <div class="max-w-6xl mx-auto">
                
                {# Breadcrumb #}
                <a href="{{ page.get_parent.url }}" class="inline-flex items-center gap-2 text-river-blue font-bold text-xs uppercase tracking-widest mb-12 hover:opacity-70 transition-opacity">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i>
                    Back to Library
                </a>

                <div class="grid lg:grid-cols-12 gap-16 items-start">
                    
                    {# Left Side: Document Cover #}
                    <div class="lg:col-span-5 reveal">
                        <div class="relative group">
                            <div class="absolute -inset-4 bg-river-blue/5 rounded-[3rem] blur-2xl group-hover:bg-river-blue/10 transition-colors"></div>
                            <div class="relative rounded-[2.5rem] overflow-hidden shadow-2xl border border-gray-100">
                                {% if page.resource_image %}
                                    {% image page.resource_image original class="w-full h-auto" %}
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    {# Right Side: Info & Action #}
                    <div class="lg:col-span-7 reveal delay-100">
                        <div class="flex items-center gap-4 mb-6">
                            <span class="px-4 py-1.5 rounded-full bg-slate-100 text-deep-teal font-bold text-[10px] uppercase tracking-widest">
                                Newsletter
                            </span>
                            <span class="text-gray-400 text-sm">{{ page.date|date:"F Y" }}</span>
                        </div>

                        <h1 class="font-heading font-bold text-4xl md:text-5xl text-deep-teal mb-8 leading-tight">
                            {{ page.title }}
                        </h1>

                        <div class="prose prose-lg prose-slate font-body text-gray-600 mb-12">
                            {{ page.intro|richtext }}
                        </div>

                        {# Download Box #}
                        {% if page.resource_file %}
                        <div class="p-8 rounded-3xl bg-slate-50 border border-slate-100 flex flex-col md:flex-row items-center justify-between gap-8 mb-12">
                            <div class="flex items-center gap-4">
                                <div class="w-14 h-14 rounded-2xl bg-white shadow-sm flex items-center justify-center text-involved-pink">
                                    <i data-lucide="file-text" class="w-8 h-8"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-deep-teal mb-0.5">Official PDF Document</p>
                                    <p class="text-xs text-gray-400">{{ page.resource_file.file.extension|upper }} â€¢ {{ page.resource_file.file.size|filesizeformat }}</p>
                                </div>
                            </div>
                            <a href="{{ page.resource_file.url }}" target="_blank" class="w-full md:w-auto px-10 py-4 bg-involved-pink text-white rounded-full font-bold shadow-lg shadow-involved-pink/20 hover:scale-105 transition-all text-sm uppercase tracking-widest text-center">
                                Download Resource
                            </a>
                        </div>
                        {% endif %}

                        {# Social Share #}
                        <div class="flex items-center gap-6 pt-8 border-t border-gray-100">
                            <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Share this resource:</span>
                            <div class="flex gap-4">
                                <a href="#" class="text-gray-400 hover:text-deep-teal transition-colors"><i data-lucide="facebook" class="w-5 h-5"></i></a>
                                <a href="#" class="text-gray-400 hover:text-deep-teal transition-colors"><i data-lucide="twitter" class="w-5 h-5"></i></a>
                                <a href="#" class="text-gray-400 hover:text-deep-teal transition-colors"><i data-lucide="link" class="w-5 h-5"></i></a>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

    {# RELATED RESOURCES #}
    <section class="py-24 bg-slate-50">
        <div class="container mx-auto px-4 lg:px-12">
            <div class="max-w-6xl mx-auto">
                <h3 class="font-heading font-bold text-2xl text-deep-teal mb-12">Recent Publications</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    {% for res in page.get_parent.get_children.live.specific|slice:":3" %}
                        {% if res.id != page.id %}
                        <a href="{{ res.url }}" class="group bg-white p-6 rounded-2xl border border-gray-100 hover:shadow-xl transition-all">
                            <p class="text-[10px] font-bold text-river-blue uppercase tracking-widest mb-2">{{ res.date|date:"M Y" }}</p>
                            <h4 class="font-heading font-bold text-deep-teal group-hover:text-involved-pink transition-colors leading-tight mb-4">{{ res.title }}</h4>
                            <span class="text-xs font-bold text-gray-400 flex items-center gap-2">
                                View Report <i data-lucide="arrow-right" class="w-3 h-3"></i>
                            </span>
                        </a>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
{% endblock %}